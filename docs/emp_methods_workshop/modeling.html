<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Empirical and Critical Methods in Musicology – modeling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">(Untitled)</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Empirical and Critical Methods in Musicology</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-color-scheme-toggle sidebar-tool" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Resources</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-syllabus.html" class="sidebar-item-text sidebar-link">Syllabus</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../course-schedule.html" class="sidebar-item-text sidebar-link">Course Schedule</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">Presentations</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../slides/week1.html" class="sidebar-item-text sidebar-link">Welcome!</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Class Notes</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  class_notes/week1.qmd
  </li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Workshop Materials</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../emp_methods_workshop/slogans.html" class="sidebar-item-text sidebar-link">Huron’s Research Slogans</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../emp_methods_workshop/day1.html" class="sidebar-item-text sidebar-link">Day 1</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#modeling---the-b-flat-valve-trumpet" id="toc-modeling---the-b-flat-valve-trumpet" class="nav-link active" data-scroll-target="#modeling---the-b-flat-valve-trumpet">Modeling - The B-flat Valve Trumpet</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/shanahdt/emp-musicology/edit/main/emp_methods_workshop/modeling.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/shanahdt/emp-musicology/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<hr>
<section id="modeling---the-b-flat-valve-trumpet" class="level2">
<h2 class="anchored" data-anchor-id="modeling---the-b-flat-valve-trumpet">Modeling - The B-flat Valve Trumpet</h2>
<hr>
<p>Recall that a model is miniature world that attempts to emulate something about the real world. In meteorology, models are used to forecast the weather or climate. In music, an example of a modeling study is found in the work of Huron &amp; Berec (2009) who built a model of the trumpet-performer interaction. They then applied this model to an analysis of various trumpet works.</p>
<section id="overview" class="level4">
<h4 class="anchored" data-anchor-id="overview">Overview</h4>
<p>The immediate goal of the model was to provide a measure of <em>performance difficulty</em> for any notated score when played on the B-flat valve trumpet. The input to the model consists of a notated musical passage or complete score. The output is a series of estimates of the difficulty of playing the score on the trumpet.</p>
<p>The model produces 10 difficulty estimates. For example, one of the estimates it produces is the <em>average breathing difficulty.</em> The model treats the lungs as a reservoir that may be depleted at various rates, and refilled when opportunities arise. Notes deplete the air supply in proportion to their durations. These rates depend on the dynamic level and register. For example, tones in the highest and lowest registers exhaust the air supply faster. In addition, the air supply is more quickly depleted at louder dynamic levels. The model assumes that the performer begins with full lungs and takes breaths whenever a rest period greater than 0.25 seconds occurs, or whenever an explicit breath mark is notated in the score. It takes about 1.3 seconds to fully inhale, so the amount of replenishment depends on the duration of the rest periods. The average breathing difficulty is calculated so that it depends on the average volume of air found in the player’s lungs over the course of the work. If the performer’s lungs are perpetually near “empty” then the difficulty score rises.</p>
<p>Apart from the average volume of air, the model is vigilant for places where the performer completely runs out of air. This doesn’t occur often in music, but it can occur for especially difficult works. The model keeps a tally of these “out-of-breath” instances.</p>
<p>Other estimates of difficulty are calculated for <em>average tonguing difficulty, average embouchure difficulty, average fingering difficulty, average dynamic difficulty, average range difficulty,</em> and <em>average interval difficulty.</em> Finally, the model calculates an <em>overall performance difficulty</em>. These values are calibrated so that the average difficulty is 1.0.</p>
<p>Using the model, for example, we estimated the difficulty for a number of musical works. For example, Herbert Clarke’s virtuoso work <em>Stars in a Velvety Sky</em> produced an overall average difficulty of 1.8. But the highest estimated difficulty was for Malcolm Arnold’s <em>Fantasy for Trumpet</em> (Opus 100) with an overall average difficulty of 2.6.</p>
</section>
<section id="how-we-built-the-model" class="level4">
<h4 class="anchored" data-anchor-id="how-we-built-the-model">How We Built the Model</h4>
<p>Our model made use of various measures we made with two trumpet players. One was a professional and the other was an amateur performer. We measured how long it took the performers to take a full breath, how fast the breath was exhausted when playing at different dynamic levels in different registers, how fast the performer could tongue at different dynamic levels and ranges, and so on.</p>
<p>In the case of fingering difficulty, we asked the performers to judge (on a 10-point scale) the degree of difficulty for different finger/valve combinations. The table below shows the average difficulty for finger/valve transitions as judged by our two trumpet players. (“0” means open position, “1” means first valve, “2-3” means valves 2 &amp; 3 are depressed.) The table shows, for example, that valve 3, followed by 1-2 has an average dificult of 7.0 (out of a maximum difficulty of 10).</p>
<p>Valve combination for the consequent note.</p>
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td style="text-align: left;"><strong>0</strong></td>
<td style="text-align: left;"><strong>1</strong></td>
<td style="text-align: left;"><strong>2</strong></td>
<td style="text-align: left;"><strong>3</strong></td>
<td style="text-align: left;"><strong>1-2</strong></td>
<td style="text-align: left;"><strong>1-3</strong></td>
<td style="text-align: left;"><strong>2-3</strong></td>
<td style="text-align: left;"><strong>1-2-3</strong></td>
</tr>
<tr class="even">
<td><strong>0:</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>1.0</strong></td>
<td style="text-align: left;"><strong>1.0</strong></td>
<td style="text-align: left;"><strong>1.9</strong></td>
<td style="text-align: left;"><strong>1.5</strong></td>
<td style="text-align: left;"><strong>3.0</strong></td>
<td style="text-align: left;"><strong>3.0</strong></td>
<td style="text-align: left;"><strong>3.5</strong></td>
</tr>
<tr class="odd">
<td><strong>1:</strong></td>
<td style="text-align: left;"><strong>1.0</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>2.0</strong></td>
<td style="text-align: left;"><strong>3.0</strong></td>
<td style="text-align: left;"><strong>2.0</strong></td>
<td style="text-align: left;"><strong>4.5</strong></td>
<td style="text-align: left;"><strong>7.5</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
</tr>
<tr class="even">
<td><strong>2:</strong></td>
<td style="text-align: left;"><strong>1.0</strong></td>
<td style="text-align: left;"><strong>1.5</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>5.3</strong></td>
<td style="text-align: left;"><strong>3.0</strong></td>
<td style="text-align: left;"><strong>9.5</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
<td style="text-align: left;"><strong>9.0</strong></td>
</tr>
<tr class="odd">
<td><strong>3:</strong></td>
<td style="text-align: left;"><strong>2.5</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
<td style="text-align: left;"><strong>4.5</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>7.0</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
<td style="text-align: left;"><strong>5.5</strong></td>
</tr>
<tr class="even">
<td><strong>1-2:</strong></td>
<td style="text-align: left;"><strong>1.5</strong></td>
<td style="text-align: left;"><strong>1.5</strong></td>
<td style="text-align: left;"><strong>2.3</strong></td>
<td style="text-align: left;"><strong>7.5</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
<td style="text-align: left;"><strong>5.0</strong></td>
</tr>
<tr class="odd">
<td><strong>1-3:</strong></td>
<td style="text-align: left;"><strong>3.5</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
<td style="text-align: left;"><strong>9.5</strong></td>
<td style="text-align: left;"><strong>1.5</strong></td>
<td style="text-align: left;"><strong>5.5</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
</tr>
<tr class="even">
<td><strong>2-3:</strong></td>
<td style="text-align: left;"><strong>2.5</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
<td style="text-align: left;"><strong>5.5</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
<td style="text-align: left;"><strong>5.0</strong></td>
<td style="text-align: left;"><strong>5.5</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
<td style="text-align: left;"><strong>3.8</strong></td>
</tr>
<tr class="odd">
<td><strong>1-2-3:</strong></td>
<td style="text-align: left;"><strong>3.0</strong></td>
<td style="text-align: left;"><strong>4.0</strong></td>
<td style="text-align: left;"><strong>8.5</strong></td>
<td style="text-align: left;"><strong>3.5</strong></td>
<td style="text-align: left;"><strong>6.0</strong></td>
<td style="text-align: left;"><strong>5.0</strong></td>
<td style="text-align: left;"><strong>5.0</strong></td>
<td style="text-align: left;"><strong>0.0</strong></td>
</tr>
</tbody>
</table>
</section>
<section id="validation-study" class="level4">
<h4 class="anchored" data-anchor-id="validation-study">Validation Study</h4>
<p>Any model should be tested before you use it. How do we know that the model does a reasonable job of predicting the difficulty of trumpet works? In order to test the validity, we need an independent judge of the difficulty of different musical passages. For this, we made use of the grading system published by the Royal Conservatory of Music of Toronto. For the trumpet, the curriculum consists of six grades: II, IV, VI, VIII, IX and X.</p>
<p>Because our model was not designed to account for performance difficulties related to musical interpretation, we limited our selection of graded materials to trumpet studies. We assumed that the difficulty associated with etudes would arise primarily from technical difficulties of performance, and that interpretive challenges would be relatively less important than is the case for non-etude musical works. For each conservatory grade, we randomly selected two solo etudes from the published syllabus. We then used the model to estimate the difficulty for each study. If our model has any validity, we ought to observe a positive correlation between the grade level and the difficulty estimates. The results are shown in the table below.</p>
<p><strong>RCMT Grade</strong></p>
<p><strong>Study No.</strong></p>
<p><strong>Composer</strong></p>
<p><strong>Overall Performance Difficulty</strong></p>
<p>II</p>
<p>6</p>
<p>Endresen</p>
<p>0.59</p>
<p>II</p>
<p>12</p>
<p>Endresen</p>
<p>0.50</p>
<p>IV</p>
<p>16</p>
<p>Clodomir</p>
<p>0.46</p>
<p>IV</p>
<p>25</p>
<p>Clodomir</p>
<p>1.05</p>
<p>VI</p>
<p>64</p>
<p>Clodomir</p>
<p>0.99</p>
<p>VI</p>
<p>65</p>
<p>Clodomir</p>
<p>1.23</p>
<p>VIII</p>
<p>1</p>
<p>Balasanyan</p>
<p>1.29</p>
<p>VIII</p>
<p>4</p>
<p>Balasanyan</p>
<p>1.03</p>
<p>IX</p>
<p>4</p>
<p>Dubois</p>
<p>1.20</p>
<p>IX</p>
<p>5</p>
<p>Dubois</p>
<p>0.97</p>
<p>X</p>
<p>2</p>
<p>Charlier</p>
<p>1.06</p>
<p>X</p>
<p>16</p>
<p>Charlier</p>
<p>1.43</p>
<p>Although the pattern isn’t perfect, we found a statistically significant positive correlation between the grade level and the difficulty estimates. We also found positive correlations for each of the constitutent difficulty components, such as breathing difficulty. In general, the results are consistent with the notion that the model has some predictive value above chance level.</p>
</section>
<section id="application" class="level4">
<h4 class="anchored" data-anchor-id="application">Application</h4>
<p>Huron and Berec used their model as a way of demonstrating the difference between <em>difficulty</em> and <em>idiomatic</em>. Musicians will commonly say that such-and-such a work is “idiomatic” to the violin. It is tempting to assume that an “idiomatic” work is a work that is easy to perform. However, a work that is easily performed on a given instrument is also likely to be easy to perform on other instruments as well.</p>
<p>A <em>difficult</em> work may be defined as a work that places stringent demands on the performer, such as extraordinary physical endurance, highly refined or accurate motor skills, taxing motor coordination, or other awkward or strenuous tasks. By <em>idiomatic</em>, we mean that, of all the ways a given musical goal or effect may be achieved, the method employed by the composer/musician is one of the least difficult. That is, the effect is produced with <em>comparative</em> or <em>relative</em> ease. This can be illustrated by examining the effect of key on performance difficulty. Suppose we were to transpose a work through all twelve pitch-classes, and compare the difficulty for all transpositions. If a work had been written in the key of E major, and E major turned out to be the most difficult of all possible keys, then it would be hard to claim that the work has been arranged idiomatically. On the other hand, if we found that the key of E major exhibited the lowest possible difficulty score, then this would lend weight to the claim that the work was created with the instrument in mind.</p>
<p>Figures 1 and 2 show the effect of transposition on fingering difficulty estimates for works by Malcolm Arnold, Guillaume Balay, and Herbert Clarke (all composers who were trumpet players). The graphs cover a range of plus or minus one octave. The actual key of composition is plotted in the center of the graph (0 transposition). Notice, first all, that the fingering difficulty shows a general tendency to fall as the work is transposed up in pitch. Brass players will recognize that this is a simple consequence of the way the harmonics and valves interact. As a work is transposed higher, there is less need to use some of the more difficult finger combinations.</p>
<p>Superimposed on this general downward trend are local fluctuations in difficulty depending on the particular key. With one exception, there is a notable minimum evident at zero transposition (i.e., the original key composition). The one exception occurs for the slow second movement in Arnold’s trumpet concerto — a movement that has a relatively low overall difficulty (0.96). The predominance of local dips at zero transposition is consistent with the suggestion that the composers explicitly chose a key that facilitates performing the work.</p>
<p><strong>Figure 1</strong></p>
<p><img src="Images/arnold_fingering.png" class="img-fluid" width="600"></p>
<p><strong>Figure 2</strong></p>
<p><img src="Images/balay_fingering.png" class="img-fluid" width="600"></p>
<p>Figure 3, by contrast, shows the comparable results for Paul Hindemith’s <em>Trumpet Sonata.</em> Hindemith was not a trumpet player. Here there is no clear effect of key, nor is there any notable dip coinciding with the key chosen by Hindemith.</p>
<p>It bears emphasizing that measures of performance ease and measures of instrumental idiomaticism cannot be regarded <em>prima facie</em> as indices of compositional merit. Difficult works are not necessarily better than easy works, and idiomatic works are not necessarily better than unidiomatic works.</p>
<p><strong>Figure 3</strong></p>
<p><img src="Images/hindemith_fingering.png" class="img-fluid" width="600"></p>
</section>
<section id="reference" class="level4">
<h4 class="anchored" data-anchor-id="reference">Reference:</h4>
<p>D. Huron &amp; J. Berec (2009). Characterizing idiomatic organization in music: A theory and case study of musical affordances. <em>Empirical Musicology Review,</em> Vol. 4, No.&nbsp;3, pp.&nbsp;103-122.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© Copyright 2023, Daniel Shanahan</div>   
    <div class="nav-footer-right">This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>